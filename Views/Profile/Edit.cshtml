@model HelloChat.ViewModels.EditProfileViewModel
@section Styles {
    <link href="/css/EditProfile.css" rel="stylesheet" />
}

<div class="container">
    <div class="profile-card">
        <h1>Edit Profile</h1>
        <form asp-controller="Profile" asp-action="Edit" method="post" enctype="multipart/form-data">
            <input type="hidden" name="Id" value="@Model.Id" />
            <input type="hidden" name="ProfileImagePath" value="@Model.ProfileImagePath" />
            <div class="profile-section">
                <div class="profile-image">
                    <img id="profilePic" src="@Model.ProfileImagePath" alt="Profile Image">
                </div>
                <label class="file-label">
                    📁 Upload New Photo
                    <input type="file" class="file-input" id="file" name="profileImage" accept="image/*" onchange="updateFileName()">
                    <span class="file-name" id="file-name">No file chosen</span>
                </label>
            </div>


			<div class="profile-info">
                <div class="input-group">
                    <label>First Name</label>
                    <input asp-for="FirstName" type="text" name="FirstName" placeholder="Enter first name" value="@Model.FirstName">
                    <span asp-validation-for="FirstName" class="text-danger"></span>
                </div>
                <div class="input-group">
                    <label>Last Name</label>
                    <input asp-for="LastName" type="text" name="LastName" placeholder="Enter last name" value="@Model.LastName">
                    <span asp-validation-for="LastName" class="text-danger"></span>
                </div>
                <div class="input-group">
                    <label>Email</label>
                    <input asp-for="Email" type="email" name="Email" placeholder="Enter email" value="@Model.Email">
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>
                <div class="input-group">
                    <label>Phone Number</label>
                    <input asp-for="PhoneNumber" type="tel" name="PhoneNumber" placeholder="Enter phone number" value="@Model.PhoneNumber">
                    <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                </div>
            </div>


            <button type="submit" class="save-btn">Save Changes</button>
        </form>
    </div>
</div>
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
<script>
    function updateFileName() {
      const fileInput = document.getElementById('file');
      const fileName = document.getElementById('file-name');
      const profilePic = document.getElementById('profilePic');

      if (fileInput.files.length > 0) {
        fileName.textContent = fileInput.files[0].name;

        const reader = new FileReader();
        reader.onload = function(e) {
          profilePic.src = e.target.result;
        };
        reader.readAsDataURL(fileInput.files[0]);
      }
    }
</script>